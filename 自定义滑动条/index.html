<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>DIYScroll</title>
  <link rel="stylesheet" href="style.css" type="text/css" />
  <script type="text/javascript" src="example.js" ></script>
</head>
<body>
		<div id="mainW" class="mainW">
			<div id="scroll" class="scroll">
	      <div id="content" class="content">
	        <div class="texts">123123123</div>
	      </div>
	    </div>
	    <!--<div id="scrollDiv" class="scrollDiv">
	   			<div id="slider" class="slider"></div>
	   		</div>-->
		</div>
    <script>
    	var DIYScroll=function(mainW,scroll,content){
    			var that=this;
    			var mainW=mainW;
    			var scroll=scroll;
    			var content=content;
    			
    			var scrollDiv;
    			var slider;
    			
    			(function(){
    				
    				scrollDiv=document.createElement('div');
    				scrollDiv.className="scrollDiv";
    				slider=document.createElement('div');
    				slider.className="slider";
    				scrollDiv.appendChild(slider);
    				mainW.appendChild(scrollDiv);
    				
    				slider.style.height=scroll.clientHeight/content.clientHeight*100+"%";
    				
    				mainW.addEventListener('mousewheel',function(e){
			    		e=e||window.event;
			    		var scrollD=scroll.clientHeight/8;
			    		var offtop;
			    		if(e.wheelDelta>0){//前滚
			  				offtop=content.offsetTop+scrollD;
			  				if(offtop>0){
			  					offtop=0;
			  				}
			    		}else{//后滚
			  				offtop=content.offsetTop-scrollD;
			  				if(offtop<scroll.clientHeight-content.clientHeight){
			  					offtop=scroll.clientHeight-content.clientHeight;
			  				}
			    		}
			    		
			    		content.style.top=offtop+"px";
			    		var topPorp=-content.offsetTop/content.clientHeight;
			    		//console.log(content.style.top);
			    		slider.style.top=topPorp*100+"%";
			    		
			    		//var scrollE=document.attachEvent('onscroll');
							document.getElementById('mainW').onscroll();
			    		return true;
			    	});
    				mainW.onscroll=function(){
			    		console.log(123);
			    	}
    				mainW.addEventListener('mouseover',function(){
			    		window.onmousewheel=function(){return false};
			    	});
			    	mainW.addEventListener('mouseout',function(){
			    		window.onmousewheel=function(){return false};
			    	});
    			}())
    	}
    	
    	new DIYScroll(document.getElementById('mainW'),
    	document.getElementById('scroll'),
    	document.getElementById('content'));
    	
    </script>
</body>
</html>
